(()=>{"use strict";var t;!function(t){t.ADD_TO_CART="ADD_TO_CART",t.GET_PRODUCTS="GET_PRODUCTS"}(t||(t={}));let e=(t=>{const e=localStorage.getItem(t)||sessionStorage.getItem(t);return e?JSON.parse(e):{screen:"DASHBOARD",cart:[],products:[]}})("STORE"),n=[];const o=o=>{const i=((e,n)=>{const{action:o,payload:i}=e;switch(o){case t.ADD_TO_CART:return Object.assign(Object.assign({},n),{cart:[...n.cart,i]});case t.GET_PRODUCTS:return Object.assign(Object.assign({},n),{products:i});default:return n}})(o,JSON.parse(JSON.stringify(e)));e=i,n.forEach((t=>t.render())),((t,e,n=!1)=>{const o=n?sessionStorage:localStorage,i=JSON.stringify(e);o.setItem(t,i)})("STORE",i)};const i=()=>{return e=void 0,n=void 0,i=function*(){const e=yield(n=void 0,o=void 0,i=void 0,r=function*(){try{const t=yield fetch("https://fakestoreapi.com/products").then((t=>t.json()));return console.log(t),t}catch(t){console.error(t)}},new(i||(i=Promise))((function(t,e){function s(t){try{a(r.next(t))}catch(t){e(t)}}function c(t){try{a(r.throw(t))}catch(t){e(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(s,c)}a((r=r.apply(n,o||[])).next())})));var n,o,i,r;return{action:t.GET_PRODUCTS,payload:e}},new((o=void 0)||(o=Promise))((function(t,r){function s(t){try{a(i.next(t))}catch(t){r(t)}}function c(t){try{a(i.throw(t))}catch(t){r(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(s,c)}a((i=i.apply(e,n||[])).next())}));var e,n,o,i};var r,s;!function(t){t.uid="uid",t.image="image",t.title="title",t.description="description",t.category="category",t.price="price",t.rating="rating"}(r||(r={}));class c extends HTMLElement{static get observedAttributes(){return Object.values(r)}attributeChangedCallback(t,e,n){e===n&&(t===r.price||t===r.rating||t===r.uid?this[t]=n?Number(n):void 0:this[t]=n),this.render()}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e;if(!this.shadowRoot)return;this.shadowRoot.innerHTML=`\n            <link rel="stylesheet" href="../src/components/product/product.css">\n            <section>\n            <div  class="card">\n            <div id="character">\n            <img id="img" src="${this.image?this.image:"Not found"}">\n            <div class="text">\n            <h2 class="name">${this.title}</h2>\n            <p>Description: ${this.description}</p>\n            <p>Category: ${this.category}</p>\n            <p>Price: $${this.price}</p>\n            <p>Rating: ${this.rating}</p>\n            <button id="add-button">Agregar</button>\n            </div>\n            </div>\n</div>\n            \n            </section>\n            `;const n=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#add-button");null==n||n.addEventListener("click",(()=>{const e={uid:this.uid,image:this.image,description:this.description,category:this.category,price:this.price,rating:this.rating};var n;o((n=e,{action:t.ADD_TO_CART,payload:n}))}))}}customElements.define("card-product",c),function(t){t.uid="uid",t.utitle="utitle",t.price="price",t.image="image"}(s||(s={}));class a extends HTMLElement{static get observedAttributes(){return Object.keys(s)}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){t===s.uid?this.uid=n?Number(n):void 0:t===s.price?this.price=n?Number(n):void 0:this[t]=n,this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML=`<link rel="stylesheet" href="../src/components/shoppingcartitem/shoppingcartitem.css">\n            <section>\n            <div  class="card">\n            <div id="character">\n            <img id="img" src="${this.getAttribute("image")}">\n            <div class="text">\n            <h2 class="name">${this.getAttribute("utitle")}</h2>\n            <p>Price: $${this.getAttribute("price")}</p>\n            \n            <button id="add-button">Agregar</button>\n            </div>\n            </div>\n</div>\n            \n            </section>`)}}customElements.define("shoppingcart-component",a);class d extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),n=[...n,this]}connectedCallback(){return t=this,n=void 0,s=function*(){if(e.products&&0!==e.products.length)console.log("Products already loaded:",e.products);else{const t=yield i();o(t),console.log("Products state after fetch:",e.products)}this.render()},new((r=void 0)||(r=Promise))((function(e,o){function i(t){try{a(s.next(t))}catch(t){o(t)}}function c(t){try{a(s.throw(t))}catch(t){o(t)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,c)}a((s=s.apply(t,n||[])).next())}));var t,n,r,s}fetchProducts(){try{if(!e.products||0===e.products.length)return console.log("No products available in the state."),null;const t=this.ownerDocument.createElement("section");return t.className="products-container",e.products.forEach((e=>{const n=this.ownerDocument.createElement("cart-product");n.setAttribute(r.uid,e.id.toString()),n.setAttribute(r.image,e.image),n.setAttribute(r.description,e.title),n.setAttribute(r.category,e.category),n.setAttribute(r.price,e.price.toString()),n.setAttribute(r.rating,e.rating.rate.toString()),t.appendChild(n)})),console.log("Products rendered:",e.products),t}catch(t){return console.error("Error rendering products:",t),null}}renderShoppingCart(){const t=this.ownerDocument.createElement("section");return t.className="cart-container",0===e.cart.length?t.innerHTML="<p>Your cart is empty</p>":e.cart.forEach((e=>{var n,o;const i=this.ownerDocument.createElement("cart-component");i.setAttribute(s.uid,(null===(n=e.uid)||void 0===n?void 0:n.toString())||""),i.setAttribute(s.utitle,e.description||""),i.setAttribute(s.price,(null===(o=e.price)||void 0===o?void 0:o.toString())||""),i.setAttribute(s.image,e.image||""),t.appendChild(i)})),t}render(){if(this.shadowRoot){this.shadowRoot.innerHTML="";const t=this.ownerDocument.createElement("h2");t.textContent="Product List",this.shadowRoot.appendChild(t);const e=this.fetchProducts();e?this.shadowRoot.appendChild(e):this.shadowRoot.innerHTML+="<p>no encontre los productos :( </p>";const n=this.ownerDocument.createElement("h2");n.textContent="Shopping Cart",this.shadowRoot.appendChild(n);const o=this.renderShoppingCart();o&&this.shadowRoot.appendChild(o)}}}customElements.define("app-dashboard",d);class u extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var t;if(this.shadowRoot&&(this.shadowRoot.innerHTML=""),"DASHBOARD"===e.screen){const e=document.createElement("app-dashboard");null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}else console.log("Not found")}}customElements.define("app-container",u)})();